<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="UTF-8">
    <title>Войти</title>
</head>
<body>
    <h1>Войти</h1>
    <form action="http://localhost:4000/api/user/auth" method="POST" enctype="application/json">
        <input type="text" name="login" placeholder="login">
        <input type="password" name="password" placeholder="password">
        <input type="submit" value="Войти">
    </form>

    <script>
        let form = document.forms[0];
        form.addEventListener("submit", e => {
            e.preventDefault();
            sendForm({
                login: form.login.value,
                password: form.password.value,
            });
        });

        async function sendForm(body) {
            let res = await fetch (form.action, {
                method: "POST",
                headers: {
                "content-type" : "application/json",
                "accept" : "application/json"
                },
                body: JSON.stringify(body)
            })
            let data = await res.json();
            if (data.msg === "200") {
                location.replace("/user.html")
            }
        }
    </script>
</body>
</html>