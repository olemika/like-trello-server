<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Регистрация</title>
</head>

<body>
    <h1>Регистрация</h1>

    <form action="http://localhost:4000/api/user/create" method="POST" enctype="application/json">
        <input type="text" name="login" placeholder="login">
        <input type="text" name="name" placeholder="name">
        <input type="password" name="password" placeholder="password">
        <input type="submit" value="Create account">
    </form>
    <!-- 
        логин string
        пароль string
        имя пользователя string
        Boards []
        Tasks []
    -->
    <script>
        let form = document.forms[0];
        form.addEventListener("submit", e => {
            e.preventDefault();
            sendForm({
                login: form.login.value,
                name: form.name.value,
                password: form.password.value,
            });
        });

        async function sendForm(body) {
            let res = await fetch (form.action, {
                method: "POST",
                headers: {
                "content-type" : "application/json",
                "accept" : "application/json"
                },
                body: JSON.stringify(body)
            })
            let data = await res.json();
            if (data.msg === 200) {
                location.replace("/user.html")
            }
        }
    </script>
</body>

</html>